# Установка и настройка Apache, PHP, MySQL  
На случай если делаешь какие-то сайты на php и всяких Joomla и WordPress, и надо их где-то запускать для демонстрации.  

### Установка и настройка Apache  
Установка стандартная, версия подходит:  
```bash
sudo apt-get update
sudo apt-get install apache2
```
Все файлы конфигурации Apache находятся в папке `/etc/apache2`.  
Ещё апач создаёт файл `/var/www/html/index.html`, но вроде конфликтов это не вызывает.  

#### Полезные команды.  
Посмотреть запущен ли апач: `sudo systemctl status apache2.service`  
Перезапустить апач: `sudo apache2ctl restart`  
Посмотреть, какой порт слушает апач: `sudo ss -tlpn`  

#### Меняем порт, который слушает Apache.  
Так как на 80 порту у нас будет nginx, то апач не должен лезть на этот порт. Мало того, он ещё и не должен отвечать из внешнего интернета на том порту, на котором будет висеть. Для этого  
в файле `/etc/apache2/ports.conf`  
меняем `Listen 80` на `Listen 127.0.0.1:9280`,  
а также `Listen 443` на `Listen 127.0.0.1:9243`.  
Перезапускам апач. Ну и добавляем в nginx в нужном месте `proxy_pass http://127.0.0.1:9280;`. Теперь, даже если в настройках конкретного сайта будет указано `<VirtualHost *:80>`, то Apache всё равно будет слушать порт не 80, а 9280. Но вот если где-то в конфигах сайта всё же встретится ещё одна директива `Listen`, то Apache будет слушать и указанный порт тоже. Поэтому надо проверять наличие лишних директив `Listen` после каждого добавления нового сайта. Вот так:  
`grep -ri Listen /etc/apache2`  
