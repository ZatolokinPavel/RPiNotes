# Настройка WakeOnLan
### Задача
Нужно настроить включение моего домашнего компа с Raspberry Pi. Причём домашний комп находится на NAT’ом относительно Raspberry Pi.

### На Raspberry Pi
Нужно установить утилиту **wakeonlan** командой  
`sudo apt-get install wakeonlan`  
После этого можно отправлять команду включения так:  
`wakeonlan –i 192.168.x.x -p 9 00:00:00:00:00:00`  
Опцией -i указывается ip-адрес роутера, за которым находится мой комп.  
Опцией -p указывается номер UDP-порта, с которого будет отправлен Magic Packet. Указание этой опции обязательно, поскольку по умолчанию wakeonlan использует девятый порт, помеченный в `/etc/services` как `discard`, что означает то, что пакет с этого порта отправить не получится. Хотя у меня сработало. В принципе, можно использовать любой незанятый в системе UDP-порт.  
И в конце указывается MAC-адрес моего компа через двоеточие.

### На роутере
Роутер, который обеспечивает защиту NAT моему компу, должен пропустить через себя пакет WOL и направить его на широковещательный адрес, или прямо на мой комп. Для этого нужно:
1.	Привязать IP -адрес к MAC-адресу компа на роутере в настройках DHCP.
2.	Сделать проброс порта 9 с внешней сети на ip моего компа по протоколу UDP.
3.	C помощью связывания ARP привязать IP-адрес к MAC-адресу моего компа. То же самое, что и в настройках DHCP, только теперь в меню «Привязка IP- и MAC-адресов»

### На компе
Тут точно не помню, но нужно включить WOL в настройках биоса или в настройках сетевой карты из-под винды.
