# Raspberry Pi notes
_Заметки и инструкции по настройке Raspberry Pi_

## План
1. Установить операционную систему Raspbian Jessie Lite. А именно: скачать с [офф. сайта](https://www.raspberrypi.org/downloads/raspbian/), записать на флешку с помощью **Win32DiskImager**, запустить на малине. Логин/пароль по умолчанию `pi` `raspberry`.
2. Настроить раскладку клавиатуры и язык системы.
3. Настроить через утилиту `sudo raspi-config`
4. Хорошо бы настроить пользователей системы, но пока не знаю как.
5. Настроить SSH доступ и локальную сеть.
6. Установить и настроить Samba для создания общей папки.
7. Создать виртуальный хост, на который закинуть сайт.

### Раскладка клавиатуры и локализация консоли
Взято отсюда http://blackdiver.net/it/linux/777  
Заходим в утилиту настройки  
`sudo raspi-config`  
Настраиваем раскладку клавиатуры:
1. Выбрать пункт `4 Localisation Options`
2. Выбрать пункт `I3 Change Keyboard Layout`
3. Далее ждём загрузки клавиатур и выбираем `Generic 105-key (Intl) PC` (или какая больше подходит)
4. На следующем экране выбрать `Other` для перехода в список всех раскладок
5. Выбрать страну — `Russian`
6. Выбрать русскую раскладку — просто `Russian`
7. Теперь выбираем метод переключения раскладок — предпочитаю `Control+Shift`
8. Клавиша временного переключения на латинскую раскладку — `No temporary switch`
9. Клавиша, которая будет использоваться в качестве AltGr — `The default for keyboard layout`
10. Клавиша, которая будет использоваться в качестве Compose key — `No compose key`
11. Использовать Control+Alt+Backspace для остановки X server — Yes (У меня такого не было).

Смена локализации:
1. Выбрать пункт `4 Localisation Options`
2. Выбрать пункт `I1 Change Locale`
3. Выбираем локализации `en_GB.UTF-8 UTF-8` и `ru_RU.UTF-8 UTF-8`  
   _Включение и выключение производится пробелом._
4. Далее нам предложат выбрать локализацию по умолчанию. Выбираем `ru_RU.UTF-8`

После выставления всех настроек нажимаем **Finish**. Raspberry предложит перезагрузиться. Соглашаемся.  
После перезагрузки логинимся в систему, и понимаем, что вместо русских символов в консоли печатаются квадратики. Чтобы такого не было выполняем команду:  
`sudo dpkg-reconfigure console-setup`  
Далее выбираем (увы, но на данном этапе вместо русских букв, скорее всего, будут квадратики, поэтому указываю пункт в меню):
* Используемая кодировка в консоли: UTF-8
* Используемая таблица символов: Определение оптимального набора символов (последний пункт)
* Консольный шрифт: Fixed или Позволить системе выбрать подходящий шрифт (последний пункт)
* Размер шрифта: 8×16

Теперь Raspberry Pi полностью поддерживает русский язык.


### Начальная настройка
Запустить программу начальной настройки  
`sudo raspi-config`  
В окне настройки в принципе почти всё понятно. Есть только несколько рекомендаций.
* **Expand Filesystem** – здесь нужно увеличить root размер на весь размер карты памяти. Нужно сделать в первую очередь.
* **Internationalization Options** – здесь нужно будет установить локаль, часовой пояс и настроить клавиатуру. Об этом отдельно.
* **Advanced Options / Memory Split** – распределение памяти Raspberry Pi. Вам необходимо определиться, сколько оперативной памяти вы готовы выделить для графического процессора. При работе в консоли будет достаточно и 16 Мб, а вот для просмотра видео в графической оболочке придется пожертвовать 64-128 Мб. Выбранные значения могут быть только: 16, 32, 64, 128 или 256.
* **Advanced Options / SSH** – включение или выключение SSH сервера. Рекомендую вам включить SSH, если вы собираетесь использовать удаленное управление.

Остальное не описываю. После завершения настроек нажмите на клавиатуре Ctrl+F, выберите \<Finish\>. Raspberry Pi уйдет на перезагрузку для внесения изменений.

### Установка пароля пользователю 'root' в Raspberry Pi
Набрать в консоли команду `sudo passwd root` и ввести пароль дважды.
