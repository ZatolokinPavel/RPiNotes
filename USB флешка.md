# Форматирование и монтирование USB флешки

### Поиск флешки как устройства
Сначала просматриваем все подключенные устройства командой  
`sudo fdisk -l`  
В результатах этой команды ищем что-то похожее на флешку. В моём случае основная карта памяти Raspberry Pi называлась `/dev/mmcblk0` а флешка, подключенная через USB попала на устройство `/dev/sda`. В дальнейшем чтобы посмотреть информацию только по флешке можно использовать такую команду:  
`sudo fdisk -l /dev/sda`

### Пересоздание разделов
Вызываем диалог управления разделами на устройстве /dev/sda  
`sudo fdisk /dev/sda`
> Это опасная операция! В результате будут удалены все данные на флешке.

Тут кратко команды:
```
   a   переключение флага загрузки  
   b   редактирование метки диска bsd  
   c   переключение флага dos-совместимости  
   d   удаление раздела  
   l   список известных типов файловых систем  
   m   вывод этого меню  
   n   добавление нового раздела  
   o   создание новой пустой таблицы разделов DOS  
   p   вывод таблицы разделов  
   q   выход без сохранения изменений  
   s   создание новой чистой метки диска Sun  
   t   изменение id системы раздела  
   u   изменение единиц измерения экрана/содержимого  
   v   проверка таблицы разделов  
   w   запись таблицы разделов на диск и выход  
   x   дополнительная функциональность (только для экспертов)
```
Нам нужны будут команды d, n (внутри p), w. Все параметры можно оставлять по умолчанию.  
Подробнее можно прочитать тут: http://dmitrykhn.homedns.org/wp/2009/12/formatirovanie-fleshki-v-linux/

### Форматирование
Форматируем в ext4 (не могу сказать почему) с меткой диска 'okusb' устройство /dev/sda1  
`sudo mkfs.ext4 -L okusb /dev/sda1`

### Монтирование
Создать папку `/mnt/okusb/` и смонтировать флешку туда командой  
`sudo mount /dev/sda1 /mnt/okusb/`  

Размонтировать потом можно будет командой  
`sudo umount /dev/sda1`

Если файловая система позволяет, после монтирования можно будет поменять права доступа к флешке  
`sudo chown -R pi:pi /mnt/okusb/`

Ну и может что ещё интересное про монтирование можно прочитать в этой статье: https://itshaman.ru/articles/3/mount
